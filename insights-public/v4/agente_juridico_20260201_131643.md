# Agente OpenClaw como Jurista Artificial

## Arquitectura OpenClaw para Derecho

### Componentes Clave

| Componente | Función | Configuración |
|------------|---------|---------------|
| Gateway | Conexiones (Telegram/Slack) | API externas |
| Brain (Ollama + Llama 3.2) | Inferencia local | Q4_K_M, 3B params |
| Skills Manager | Módulos jurídica | bcnres parser |
| Heartbeat | Sincronización diaria | Cron interno |

## Características Distintivas

### 1. Heartbeat Circadiano
```python
# Rutina diaria a las 07:00 AM
def rutina_matutina():
    feed = rss.diario_oficial()
    diff = feed.diff(indice_actual)
    if diff.nuevas_normas:
        actualizar_indice_vectorial()
        notify_user("Nuevas normas publicadas hoy")
```

### 2. Temperatura Dinámica por Tipo de Derecho

| Tipo de Norma | Temperature | Razón |
|---------------|-------------|-------|
| Constitución | 0.0 | Determinismo absoluto |
| Derecho Penal | 0.0 | Libertad personal en juego |
| Civil/Contratos | 0.2 | Margen interpretativo bajo |
| Doctrina | 0.6 | Creatividad permitida |

### 3. Tool Calling (Llama 3.2)
El agente debe usar herramientas para:
- Consultar API BCN (verificar vigencia)
- Recuperar texto normativo
- Navegar grafo de citaciones
- Validar referencias cruzadas

## Flujo de Trabajo ReAct

```
Usuario: "¿Es legal Uber en Chile hoy?"

1. Razonamiento: Identificar conceptos clave (EAT, Uber, transporte)
2. Acción: Consultar índice vectorial
3. Observación: Encontrar Ley 21.553
4. Razonamiento: Verificar vigencia (reglamento pendiente)
5. Acción: Consultar API BCN fecha vigencia
6. Observación: Estado "Vigente con vigencia diferida"
7. Respuesta: Explicar situación legal actual
```

## Sistema de Archivos

```
/home/pi/.openclaw/skills/cl-law-core/
├── manifest.json       # Herramientas disponibles
├── index.py            # Lógica principal
├── bcn_api.py          # Cliente BCN
├── ontology_map.json   # Mapeo bcnres
└── storage/            # Base de datos vectorial
```

## Manejo de Temporalidad

### Modo Línea de Tiempo

```python
def consultar_ historic(query, fecha_referencia):
    # El usuario pregunta sobre el derecho en fecha X
    version = bcn_api.get_version(query, fecha_referencia)
    return f"Según la legislación vigente en {fecha_referencia}..."
```

## Limitaciones y Mitigaciones

| Problema | Mitigación |
|----------|------------|
| Latencia RPi | Streaming de tokens |
| Alucinaciones de citas | Post-procesamiento + validación API |
| Integridad datos | SSD NVMe + F2FS filesystem |
| RAM limitada | ZRAM + caching inteligente |
